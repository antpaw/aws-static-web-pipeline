const { STATUS_CODES } = require('http');

const content = `
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>404 - SPL Fantasy</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">

  <style>
      body {
          background-color: #42A1BA;
          color: white;
          margin: 0;
      }

      .logo-background {
          position: absolute;
          max-width: 600px;
          left: 0;
          right: 0;
          margin-left: auto;
          margin-right: auto;
          z-index: -1;
          display: flex;
      }

      .spl-fantasy-logo {
          margin-top: 32px;
      }

      .title-404 {
          margin-top: 64px;
      }

      .container {
          margin: 0 auto;
          width: 100%;
          max-width: 1100px;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
      }

      .text-container {
          max-width: 400px;
      }

      .back-home-button {
          margin-top: 32px;
          cursor: pointer;
          padding: 16px 32px;
          border: 1px solid white;
          border-radius: 16px;
          background-color: transparent;
          color: white;
          min-width: 120px;
          text-decoration: none;
      }

      .back-home-button:hover {
          background-color: rgba(255, 255, 255, 0.1);
      }
  </style>
</head>
<body>
<div class="logo-background">
  <svg width="599" height="551" viewBox="0 0 599 551" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g opacity="0.16">
      <path fill-rule="evenodd" clip-rule="evenodd"
            d="M299.106 -67.0092L288.027 -76.5255L299.106 -86L310.183 -76.5255L299.106 -67.0092ZM25.3431 404.595L15.8263 395.099L25.3467 385.604L34.817 395.099L25.3431 404.595ZM316.371 43.7694L300.687 78.5192L427.518 151.384L455.778 81.5235C385.422 48.1179 316.373 43.7694 316.373 43.7694H316.371ZM297.523 373.055L281.838 407.761C281.838 407.761 212.789 403.412 142.431 370.006L170.692 300.146L297.523 373.055ZM531.741 288.311L519.352 281.156L436.787 403.124L486.076 426.752C524.093 358.297 531.741 288.311 531.741 288.311ZM78.8554 170.377L66.4668 163.178C66.4668 163.178 74.0705 93.2153 112.132 24.7814L161.421 48.402L78.8554 170.377ZM405.775 -48.019L401.97 -41.8529L526.35 40.6046L531.74 16.9993C491.361 -7.75118 449.261 -29.4814 405.775 -48.019ZM563.392 382.415L572.909 391.933L582.383 382.415L572.909 372.942L563.392 382.415ZM26.9042 78.5864L15.8263 69.0696L26.9042 59.5957L37.9822 69.0696L26.9042 78.5864ZM423.959 300.146L446.283 331.203C446.283 331.203 408.104 388.891 344.1 433.082L297.522 373.409L423.959 300.146ZM148.76 120.305L171.083 151.383L297.521 78.1745L250.943 18.4479C186.938 62.652 148.76 120.298 148.76 120.298V120.305ZM113.944 -3.62856L113.943 -3.63039V-3.62783L113.944 -3.62856ZM113.944 -3.62856L117.256 2.62429L250.044 -63.5861L232.572 -79.669C191.203 -57.1963 151.555 -31.782 113.944 -3.62856ZM468.365 56.4314L455.778 63.6316L520.722 195.697L566.557 164.749C525.967 97.7999 468.365 56.4314 468.365 56.4314ZM129.807 395.098L129.804 395.1H129.809L129.807 395.098ZM142.432 387.9L129.807 395.098C129.388 394.797 72.125 353.487 31.6525 286.782L77.5111 255.834L142.432 387.9ZM192.432 499.549L196.237 493.384L71.857 410.925L66.4668 434.531C106.834 459.304 148.935 481.035 192.432 499.549ZM583.904 179.872L590.794 180.145C596.502 227.063 598.921 274.353 598.03 321.638L576.054 328.633L583.904 179.872ZM484.266 455.161L484.265 455.159L484.266 455.159V455.161ZM484.265 455.159L480.953 448.906L348.165 515.117L365.637 531.2C407.006 508.728 446.654 483.313 484.265 455.159ZM563.392 69.0487L574.471 78.5864L585.548 69.0905L574.471 59.5957L563.392 69.0487ZM288.027 540.694L297.522 550.19L307.018 540.694L297.564 531.2L288.027 540.694ZM427.337 152.139L465.957 148.222V148.22C465.957 148.22 497.137 210.84 503.255 289.398L427.292 300.146L427.337 152.139ZM132.25 303.309L170.825 299.391L170.916 151.384L94.9526 162.089C101.07 240.672 132.25 303.31 132.25 303.31V303.309ZM237.429 7.74261L237.384 -6.4177C237.384 -6.4177 302.556 -34.3397 381.78 -35.3569L386.145 18.4502L237.429 7.74261ZM363.99 457.972L363.945 443.868L215.229 433.08L219.594 486.887C298.862 485.87 363.988 457.972 363.988 457.972H363.99ZM14.3503 271.659L7.4616 271.386C1.72261 224.47 -0.711456 177.18 0.178885 129.894L22.1559 122.898L14.3503 271.659Z"
            fill="white"/>
    </g>
  </svg>
</div>
<div class="container">
  <div class="spl-fantasy-logo" aria-label="SPL Fantasy logo">
    <svg width="201" height="59" viewBox="0 0 201 59" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
          d="M6.24 21.104C2.064 21.104 0.528 22.064 0.528 25.832C0.528 28.256 1.392 29.696 3.6 30.752L6.336 32.048C7.104 32.384 7.272 32.672 7.272 33.488C7.272 34.424 6.96 34.616 5.952 34.616C5.208 34.616 2.976 34.568 0.936 34.496L0.672 37.616C3.072 38.24 5.04 38.336 6.048 38.336C10.32 38.336 11.616 37.16 11.616 33.416C11.616 30.992 10.8 29.528 8.544 28.472L6.096 27.296C5.112 26.888 4.872 26.6 4.872 25.784C4.872 24.776 5.184 24.68 6.096 24.68C7.872 24.68 9.792 24.704 10.992 24.752L11.232 21.848C9.6 21.248 7.68 21.104 6.24 21.104ZM18.8863 21.224C16.1503 21.224 14.8543 21.248 13.0303 21.44V38H17.4223V32.096C18.1183 32.168 18.8143 32.216 19.5103 32.216C23.3023 32.216 24.6463 31.064 24.6463 26.72C24.6463 22.424 23.3023 21.224 18.8863 21.224ZM17.4223 29.024V24.416H18.7903C19.9423 24.416 20.2063 24.872 20.2063 26.72C20.2063 28.52 19.8943 29.024 18.7903 29.024H17.4223ZM30.1946 21.44H25.8026V34.448C25.8026 36.56 27.2186 38.096 28.8026 38.096C31.1786 38.096 33.6986 38.072 35.8106 37.784L35.6426 34.472H31.0346C30.6026 34.472 30.1946 34.112 30.1946 33.44V21.44ZM50.3882 24.8L50.6042 21.656C48.7082 21.344 45.8762 21.344 43.5482 21.344C41.7722 21.344 40.4042 22.76 40.4042 24.968V38H44.8202V31.304H49.6922V28.28H44.8202V25.832C44.8202 25.16 45.2042 24.8 45.6602 24.8H50.3882ZM58.3253 34.016L58.9973 38H63.4613L60.0293 22.568C59.8133 21.872 59.2133 21.44 58.4933 21.44H54.5333C53.8133 21.44 53.2133 21.872 53.0693 22.568L49.5652 38H54.0773L54.7493 34.016H58.3253ZM57.7733 30.8H55.3013L56.0453 26.456C56.1413 25.88 56.2133 25.28 56.2613 24.728H56.7893C56.8372 25.28 56.9333 25.88 57.0293 26.456L57.7733 30.8ZM76.7464 21.44H72.7864V28.592C72.7864 29.72 72.8104 30.968 72.9064 32.312H72.8104C72.4264 30.992 72.2584 29.864 71.8504 28.736L69.2824 22.712C68.9464 21.8 68.5144 21.44 67.5784 21.44H65.7064C64.7464 21.44 64.1944 21.992 64.1944 23V38H68.2024L68.2264 30.584C68.2264 29.408 68.1544 28.136 68.0584 26.936H68.2024C68.4664 28.064 68.7064 29.384 69.1384 30.536L71.6584 36.728C71.9944 37.64 72.4744 38 73.3624 38H75.2104C76.2184 38 76.7464 37.448 76.7464 36.44V21.44ZM89.7684 24.848V21.44H77.7924V24.848H81.5364V38H85.9524V24.848H89.7684ZM97.0206 34.016L97.6926 38H102.157L98.7246 22.568C98.5086 21.872 97.9086 21.44 97.1886 21.44H93.2286C92.5086 21.44 91.9086 21.872 91.7646 22.568L88.2606 38H92.7726L93.4446 34.016H97.0206ZM96.4686 30.8H93.9966L94.7406 26.456C94.8366 25.88 94.9086 25.28 94.9566 24.728H95.4846C95.5326 25.28 95.6286 25.88 95.7246 26.456L96.4686 30.8ZM108.17 21.104C103.994 21.104 102.458 22.064 102.458 25.832C102.458 28.256 103.322 29.696 105.53 30.752L108.266 32.048C109.034 32.384 109.202 32.672 109.202 33.488C109.202 34.424 108.89 34.616 107.882 34.616C107.138 34.616 104.906 34.568 102.866 34.496L102.602 37.616C105.002 38.24 106.97 38.336 107.978 38.336C112.25 38.336 113.546 37.16 113.546 33.416C113.546 30.992 112.73 29.528 110.474 28.472L108.026 27.296C107.042 26.888 106.802 26.6 106.802 25.784C106.802 24.776 107.114 24.68 108.026 24.68C109.802 24.68 111.722 24.704 112.922 24.752L113.162 21.848C111.53 21.248 109.61 21.104 108.17 21.104ZM122.571 32.72L127.083 21.44H122.571L120.915 27.104C120.723 27.8 120.627 28.592 120.507 29.312H120.219C120.147 28.592 120.051 27.8 119.859 27.104L118.203 21.44H113.691L118.179 32.672V38H122.571V32.72Z"
          fill="white"/>
      <path fill-rule="evenodd" clip-rule="evenodd"
            d="M172.739 1.76119L171.711 0.878665L172.739 0L173.766 0.878665L172.739 1.76119ZM147.35 45.4975L146.468 44.6169L147.351 43.7363L148.229 44.6169L147.35 45.4975ZM174.34 12.0348L172.886 15.2575L184.648 22.0149L187.269 15.5361C180.744 12.4381 174.34 12.0348 174.34 12.0348H174.34ZM172.592 42.5724L171.137 45.791C171.137 45.791 164.734 45.3878 158.209 42.2897L160.83 35.8109L172.592 42.5724ZM194.313 34.7133L193.165 34.0498L185.507 45.361L190.078 47.5522C193.604 41.2038 194.313 34.7133 194.313 34.7133ZM152.313 23.7761L151.164 23.1085C151.164 23.1085 151.869 16.6202 155.399 10.2736L159.97 12.4642L152.313 23.7761ZM182.631 3.52239L182.279 4.09423L193.814 11.7413L194.313 9.55215C190.569 7.2568 186.664 5.24155 182.631 3.52239ZM197.249 43.4407L198.131 44.3234L199.01 43.4407L198.131 42.5622L197.249 43.4407ZM147.495 15.2637L146.468 14.3811L147.495 13.5025L148.522 14.3811L147.495 15.2637ZM184.318 35.8109L186.388 38.6911C186.388 38.6911 182.847 44.0411 176.912 48.1393L172.592 42.6053L184.318 35.8109ZM158.796 19.1327L160.866 22.0149L172.592 15.2256L168.272 9.68657C162.337 13.786 158.796 19.1321 158.796 19.1321V19.1327ZM155.567 7.63902L155.567 7.63885V7.63909L155.567 7.63902ZM155.567 7.63902L155.874 8.21891L168.189 2.07858L166.569 0.587065C162.732 2.67117 159.055 5.02808 155.567 7.63902ZM188.436 13.209L187.269 13.8767L193.292 26.1244L197.542 23.2543C193.778 17.0454 188.436 13.209 188.436 13.209ZM157.038 44.6168L157.038 44.6169H157.038L157.038 44.6168ZM158.209 43.9492L157.038 44.6168C156.999 44.5888 151.689 40.7578 147.935 34.5715L152.188 31.7015L158.209 43.9492ZM162.846 54.3035L163.199 53.7318L151.664 46.0846L151.164 48.2737C154.908 50.5712 158.812 52.5865 162.846 54.3035ZM199.151 24.6567L199.79 24.682C200.319 29.0332 200.544 33.4188 200.461 37.804L198.423 38.4527L199.151 24.6567ZM189.91 50.187L189.91 50.1869L189.91 50.1868V50.187ZM189.91 50.1869L189.603 49.607L177.289 55.7473L178.909 57.2388C182.745 55.1547 186.422 52.7978 189.91 50.1869ZM197.249 14.3792L198.276 15.2637L199.303 14.383L198.276 13.5025L197.249 14.3792ZM171.711 58.1193L172.592 59L173.473 58.1193L172.596 57.2388L171.711 58.1193ZM184.631 22.0849L188.213 21.7216V21.7214C188.213 21.7214 191.104 27.5288 191.672 34.8142L184.627 35.8109L184.631 22.0849ZM157.265 36.1044L160.842 35.741L160.851 22.0149L153.806 23.0077C154.373 30.2954 157.265 36.1045 157.265 36.1045V36.1044ZM167.019 8.69355L167.015 7.38033C167.015 7.38033 173.059 4.79085 180.406 4.69652L180.811 9.68657L167.019 8.69355ZM178.756 50.4478L178.752 49.1397L164.96 48.1393L165.365 53.1294C172.716 53.035 178.756 50.4478 178.756 50.4478H178.756ZM146.331 33.1692L145.692 33.1438C145.16 28.7929 144.934 24.4072 145.017 20.0219L147.055 19.3731L146.331 33.1692Z"
            fill="white"/>
      <path d="M172.426 31.2903V36.6913H168.482V22.0146H177.288L176.795 25.4196H172.426V28.261H176.392V31.2903H172.426Z"
            fill="white"/>
    </svg>
  </div>
  <h1 class="title-404" aria-label="404">
    <svg width="148" height="54" viewBox="0 0 148 54" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
          d="M26.2161 42.7998H0.536133V34.6398L14.8561 1.99981H40.2961V31.1998H45.6561V42.7998H40.2961V51.9998H26.2161V42.7998ZM15.4161 31.1998H26.2161V12.5598H23.8161L15.4161 31.1998Z"
          fill="white"/>
      <path
          d="M52.0768 27.0398C52.0768 21.9198 52.4234 17.6798 53.1168 14.3198C53.8634 10.9065 55.0901 8.21314 56.7968 6.23981C58.5568 4.26647 60.9034 2.87981 63.8368 2.07981C66.8234 1.22647 70.5568 0.799805 75.0368 0.799805C79.5168 0.799805 83.2234 1.22647 86.1568 2.07981C89.0901 2.87981 91.4101 4.26647 93.1168 6.23981C94.8234 8.15981 96.0501 10.8265 96.7968 14.2398C97.5434 17.5998 97.9168 21.8665 97.9168 27.0398C97.9168 31.1465 97.6768 34.6931 97.1968 37.6798C96.7701 40.6665 96.0234 43.1731 94.9568 45.1998C93.9434 47.1731 92.5568 48.7465 90.7968 49.9198C89.0901 51.0931 86.9301 51.9198 84.3168 52.3998C81.7034 52.9331 78.6101 53.1998 75.0368 53.1998C71.4101 53.1998 68.2901 52.9331 65.6768 52.3998C63.1168 51.9198 60.9568 51.0931 59.1968 49.9198C57.4368 48.6931 56.0234 47.0931 54.9568 45.1198C53.9434 43.0931 53.1968 40.6131 52.7168 37.6798C52.2901 34.6931 52.0768 31.1465 52.0768 27.0398ZM67.1968 12.7998V36.9598C67.1968 38.6665 67.5434 39.8131 68.2368 40.3998C68.9834 40.9331 70.5034 41.1998 72.7968 41.1998H82.7968V17.0398C82.7968 15.3331 82.3701 14.2131 81.5168 13.6798C80.7168 13.0931 79.0901 12.7998 76.6368 12.7998H67.1968Z"
          fill="white"/>
      <path
          d="M128.404 42.7998H102.724V34.6398L117.044 1.99981H142.484V31.1998H147.844V42.7998H142.484V51.9998H128.404V42.7998ZM117.604 31.1998H128.404V12.5598H126.004L117.604 31.1998Z"
          fill="white"/>
    </svg>
  </h1>
  <h2 class="text-container">ﻊﺿو ﻪﻘﻳﺮﻃ رﻮﺼﺘﻴﻟ ﻞﻴﻤﻌﻟاﻰﻠﻋ ضﺮﻌﺘﻟ ﻢﻴﻣﺎﺼﺘﻟا</h2>
  <p class="text-container">"ﺮﺸﻟاو ﺮﻴﺨﻟا ﻲﺻﺎﻗأ لﻮﺣ" بﺎﺘﻛ ﻦﻣ .دﺎﻠﻴﻤﻟا ﻞﺒﻗ 45 مﺎﻌﻟا ﺬﻨﻣ ﻲﻜﻴﺳﺎﻠﻜﻟا ﻲﻨﻴﺗﺎﻠﻟا بدﺄﻟا ﻲﻓ روﺬﺟ
    ﻪﻟ نإ ﻞﺑ ،ًﺎﻴﺋاﻮﺸﻋ َﺎﺼﻧ ﺲﻴﻟ مﻮﺴﺒﻳإ ﻢﻳرﻮﻟ نﺈﻓ ﺪﺋﺎﺴﻟا دﺎﻘﺘﻋﺎﻠﻟ َﺎﻓﺎﻠﺧو</p>
  <a class="back-home-button" href="/">نﺂﻟا أﺪﺑا</a>
</div>
</body>
</html>`;

exports.handler = async (event) => {
  const { response } = event.Records[0].cf;

  let resCode = parseInt(response.status, 10); // use 'status' not 'code'
  if (resCode < 400) {
    return response;
  }

  let maxAge = 0;
  if (resCode >= 500) {
    maxAge = 15;
  }
  if (resCode === 403) {
    resCode = 404;
  }

  return {
    status: resCode + '',
    statusDescription: STATUS_CODES[resCode + ''],
    headers: {
      'cache-control': [{
        key: 'Cache-Control',
        value: 'max-age=' + maxAge
      }],
      'content-type': [{
        key: 'Content-Type',
        value: 'text/html'
      }],
    },
    body: content.replace(new RegExp('_CODE_', 'g'), resCode),
  };
};
